(this["webpackJsonpui-api3-dao"]=this["webpackJsonpui-api3-dao"]||[]).push([[0],{217:function(t,e){},224:function(t,e){},271:function(t,e,n){},272:function(t,e,n){"use strict";n.r(e);var r=n(9),a=n(2),c=n.n(a),s=n(44),i=n.n(s),o=n(193),u=n(143),d=n(312),l=n(31);var b=function(){return Object(r.jsx)(l.c,{children:Object(r.jsx)(l.a,{path:["/dashboard","/"],children:Object(r.jsx)(ot,{})})})},p=n(311),h=n(320),j=n(302),f=n(303),x=n(30),v=Object(a.createContext)({address:null,setAddress:function(){}});var O=function(t){var e=Object(a.useState)(null),n=Object(x.a)(e,2),c={address:n[0],setAddress:n[1]};return Object(r.jsx)(v.Provider,{value:c,children:t.children})},g=n(300),m=n(319),w=Object(g.a)((function(t){return Object(m.a)({root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}})}));var k=function(){var t=w(),e=Object(a.useContext)(v);return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(h.a,{position:"static",children:Object(r.jsxs)(j.a,{children:[Object(r.jsx)(f.a,{variant:"h6",className:t.title,children:"API3 DAO"}),e.address?Object(r.jsx)(L,{address:e.address}):Object(r.jsx)(B,{})]})})})},y=n(0),N=n.n(y),C=n(8),S=n(313),I=n(316),F=n(5),A=n(6),D=n(60).providers.Web3Provider,T=function(){function t(){var e=this;Object(F.a)(this,t),this.provider=null,this.signer=null,this.getDefaultAddress=Object(C.a)(N.a.mark((function t(){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.provider.getSigner();case 2:return n=t.sent,t.next=5,n.getAddress();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)}))),this.getWeb3=Object(C.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.provider;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),this.getNetwork=Object(C.a)(N.a.mark((function t(){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=e.provider)||void 0===n?void 0:n.getNetwork();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),this.getNetworkName=Object(C.a)(N.a.mark((function t(){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getNetwork();case 2:return n=t.sent,r="homestead"===n.name?"mainnet":n.name,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))),this.getNetworkId=Object(C.a)(N.a.mark((function t(){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getNetwork();case 2:return n=t.sent,r=n.chainId,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))),this.getTxStatus=function(){var t=Object(C.a)(N.a.mark((function t(e){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"",t.next=3,fetch("");case 3:return n=t.sent,t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getSigner=Object(C.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.signer);case 1:case"end":return t.stop()}}),t)})))}return Object(A.a)(t,[{key:"initialize",value:function(){var t=Object(C.a)(N.a.mark((function t(){var e,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=window,n=e.ethereum,t.next=4,n.enable();case 4:return this.provider=new D(n),t.next=7,this.provider.getSigner();case 7:this.signer=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error instanciating Web3 Class",t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){var e=Object(C.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._instance){e.next=5;break}return n=new t,e.next=4,n.initialize();case 4:this._instance=n;case 5:return e.abrupt("return",this._instance);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}();T._instance=void 0;var B=function(){var t=Object(a.useContext)(v),e=function(){var e=Object(C.a)(N.a.mark((function e(){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getInstance();case 2:return n=e.sent,e.next=5,n.getDefaultAddress();case 5:r=e.sent,t.setAddress(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(S.a,{children:Object(r.jsx)(I.a,{onClick:e,color:"secondary",children:"Connect"})})},z=Object(g.a)((function(t){return Object(m.a)({root:{}})}));var P=function(){var t=z(),e=c.a.useState(!1),n=Object(x.a)(e,2),a=n[0],s=n[1],i=function(){var t=Object(C.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(!0);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:t.root,children:[Object(r.jsx)(I.a,{color:"inherit",className:t.root,onClick:function(){return i()},children:"Create Staking Target Vote"}),Object(r.jsx)(U,{handleClose:function(){s(!1)},open:a})]})},V=Object(g.a)((function(t){return Object(m.a)({root:{}})}));var L=function(t){var e=V(),n=t.address;return Object(r.jsx)(f.a,{variant:"subtitle2",className:e.root,children:n})},_=n(314),H=n(310),M=n(281),W=n(321),E=n(318),R=n(317),G=n(279),J=n(315),Y={voting:"0x6f97537528dabe30178f7eb335cf039a375f2f7b"},q=function(){function t(){Object(F.a)(this,t),this.web3=void 0,this.org=void 0,this.signer=void 0,this.address=void 0,this.network=void 0}return Object(A.a)(t,[{key:"initialize",value:function(){var t=Object(C.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.getInstance();case 3:return this.web3=t.sent,t.next=6,this.web3.getSigner();case 6:return this.signer=t.sent,t.next=9,this.web3.getDefaultAddress();case 9:return this.address=t.sent,this.network=4,t.next=13,Object(G.a)("api3dao.aragonid.eth","thegraph",{network:this.network});case 13:this.org=t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log("Error instanciating Aragon Class",t.t0);case 19:case"end":return t.stop()}}),t,this,[[0,16]])})));return function(){return t.apply(this,arguments)}}()},{key:"votes",value:function(){var t=Object(C.a)(N.a.mark((function t(){var e,n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(J.a)(this.org.app("voting"));case 2:return e=t.sent,t.next=5,e.votes();case 5:return n=t.sent,r=function(t,e){return new Date(1e3*t.startDate)<new Date(1e3*e.startDate)?1:-1},t.abrupt("return",n.sort(r));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"newVote",value:function(){var t=Object(C.a)(N.a.mark((function t(e,n,r){var a,c,s,i,o,u,d=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=[(a={stakingTarget:e,metadata:n=n||"no description was provided",executionScript:"0x00000001",castVote:!1,executesIfDecided:!1}).executionScript,a.metadata],s=this.org.appIntent(Y.voting,"newVote",c),console.log("intent",s),t.next=8,s.paths(this.address);case 8:i=t.sent,console.log("path",i),o=i.transactions,u=function(){var t=Object(C.a)(N.a.mark((function t(e,n){var a,c,s,i,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(a=e).from,s=a.to,i=a.data,0!==n){t.next=14;break}return console.log("tx index 0",e),e={from:c,to:s,data:i},t.prev=4,t.next=7,null===(o=d.signer)||void 0===o?void 0:o.sendTransaction(e);case 7:t.sent,r(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log("Popup error message callback");case 14:1===n&&console.log("tx index 1",e);case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}(),o.map(u);case 13:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"vote",value:function(){var t=Object(C.a)(N.a.mark((function t(e,n){var r,a,c,s,i,o,u,d,l,b;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.org.appIntent(Y.voting,"vote",[e,n,!1]),t.next=3,a.paths(this.address);case 3:return c=t.sent,s=c.transactions,i=s[0],o=i.from,u=i.to,d=i.data,l={from:o,to:u,data:d},t.next=10,null===(r=this.signer)||void 0===r?void 0:r.sendTransaction(l);case 10:return b=t.sent,t.abrupt("return",b);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){var e=Object(C.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._instance){e.next=5;break}return n=new t,e.next=4,n.initialize();case 4:this._instance=n;case 5:return e.abrupt("return",this._instance);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}();q._instance=void 0;var K=q,Q=Object(g.a)((function(t){return Object(m.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:t.palette.background.paper,border:"2px solid #000",boxShadow:t.shadows[5],padding:50,height:"50%",width:"50%"},form:{display:"flex",justifyContent:"center",flexDirection:"column"},formControl:{paddingBottom:50}})}));var U=function(t){var e=Q(),n=t.open,c=t.handleClose,s=Object(a.useState)(0),i=Object(x.a)(s,2),o=i[0],u=i[1],d=Object(a.useState)(""),l=Object(x.a)(d,2),b=l[0],p=l[1],h=function(){var t=Object(C.a)(N.a.mark((function t(){var e;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getInstance();case 2:e=t.sent,"\n    ".concat(b," +\n    new Staking Target proposed: ").concat(o,"\n    "),e.newVote(o,b,c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsx)(_.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:n,onClose:c,closeAfterTransition:!0,BackdropComponent:H.a,BackdropProps:{timeout:500},children:Object(r.jsx)(M.a,{in:n,children:Object(r.jsxs)(S.a,{className:e.paper,children:[Object(r.jsx)(f.a,{variant:"h2",children:"New Staking Target Proposal"}),Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),h()},className:e.form,children:[Object(r.jsxs)(W.a,{className:e.formControl,children:[Object(r.jsx)(E.a,{htmlFor:"target-amout",children:"Write a description"}),Object(r.jsx)(R.a,{id:"target-amout",type:"text",onChange:function(t){var e=t.target.value;p(e)}}),"Description: ",b]}),Object(r.jsxs)(W.a,{className:e.formControl,children:[Object(r.jsx)(E.a,{htmlFor:"target-amout",children:"Staking target amount"}),Object(r.jsx)(R.a,{id:"target-amout",type:"number",onChange:function(t){var e=t.target.value;u(Number(e))}}),"Staking Target: ",o]}),Object(r.jsx)(W.a,{children:Object(r.jsx)(I.a,{color:"inherit",type:"submit",children:"Submit proposal"})})]})]})})})},X=Object(g.a)((function(t){return Object(m.a)({box:{padding:10}})}));var Z=function(){var t=X();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(S.a,{className:t.box,children:Object(r.jsxs)(f.a,{variant:"subtitle1",children:["Total API3 tokens staked: ",0]})}),Object(r.jsx)(S.a,{className:t.box,children:Object(r.jsxs)(f.a,{variant:"subtitle1",children:["API3 tokens balance: ",0]})}),Object(r.jsx)(S.a,{className:t.box,children:Object(r.jsxs)(f.a,{variant:"subtitle1",children:["API3 staked tokens balance: ",0]})})]})},$=Object(g.a)((function(t){return Object(m.a)({box:{padding:10}})}));var tt=function(){var t=$();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(S.a,{children:[Object(r.jsx)(S.a,{className:t.box,children:Object(r.jsx)(f.a,{variant:"h4",children:"What would like to do?"})}),Object(r.jsx)(S.a,{className:t.box,children:Object(r.jsx)(P,{})})]})})};Object(g.a)((function(t){return Object(m.a)({root:{},button:{marginRight:10}})}));var et=n(16),nt={padding:10},rt=Object(g.a)((function(t){return Object(m.a)({root:Object(et.a)({},nt),voteItem:Object(et.a)({},nt),voteListTitle:{paddingLeft:10}})}));var at=function(){var t=rt(),e=Object(a.useState)([]),n=Object(x.a)(e,2),c=n[0],s=n[1],i=function(){var t=Object(C.a)(N.a.mark((function t(){var e;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getInstance();case 2:return e=t.sent,t.t0=s,t.next=6,e.votes();case 6:t.t1=t.sent,(0,t.t0)(t.t1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){i()}),[]),Object(r.jsxs)(S.a,{children:[c.length>0?Object(r.jsx)(f.a,{variant:"subtitle1",className:t.voteListTitle,children:"Vote List"}):Object(r.jsx)(f.a,{variant:"subtitle1",className:t.voteListTitle,children:"Loading vote proposals..."}),c.map((function(e,n){return n=Number(e.id.slice(-4)),Object(r.jsxs)(S.a,{className:t.voteItem,children:[Object(r.jsxs)(S.a,{children:[Object(r.jsxs)("p",{children:["Vote #: ",n]}),Object(r.jsxs)("p",{children:["Vote ID: ",e.id.slice(-4)]})]}),Object(r.jsx)(S.a,{children:Object(r.jsxs)("p",{children:["Description of Vote: ",e.metadata]})}),Object(r.jsx)(st,{voteIndex:n})]},n)})).slice(0,5)]})},ct=Object(g.a)((function(t){return Object(m.a)({root:{},button:{marginRight:10}})}));var st=function(t){var e=ct(),n=t.voteIndex,a=function(){var t=Object(C.a)(N.a.mark((function t(e,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getInstance();case 2:t.sent.vote(e,n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(r.jsxs)(S.a,{children:[Object(r.jsx)(I.a,{className:e.button,onClick:function(){return a(n,!0)},color:"inherit",children:"Yes"}),Object(r.jsx)(I.a,{className:e.button,onClick:function(){return a(n,!1)},color:"inherit",children:"No"})]})},it=Object(g.a)((function(t){return Object(m.a)({root:{margin:30,padding:10},box:{padding:10}})}));var ot=function(){var t=it();return Object(r.jsxs)(p.a,{className:t.root,children:[Object(r.jsx)(Z,{}),Object(r.jsx)(tt,{}),Object(r.jsx)(at,{})]})},ut=n(194),dt=Object(ut.a)({palette:{primary:{main:"#000000de",light:"#738DCE",dark:"#000000"},secondary:{main:"#FFFFFF",light:"#0059E2"},text:{primary:"#000",secondary:"#4A4A4A",light:"#F7F7F7"},info:{main:"#0034B6"}},typography:{h1:{fontSize:"42px",lineHeight:"42px"},h2:{fontSize:"27px",lineHeight:"133.84%"},h3:{fontSize:"20px",lineHeight:"143%"},body1:{fontSize:"16px",lineHeight:"143%"},body2:{fontWeight:"normal",fontSize:"16px",lineHeight:"143%"},subtitle1:{fontSize:"22px",lineHeight:"28px"},h4:{fontSize:"28px",lineHeight:"28px",fontWeight:600,marginBottom:6,color:"#000000"},subtitle2:{textAlign:"initial",fontSize:14}},overrides:{MuiInputBase:{},MuiInput:{},MuiOutlinedInput:{},MuiTextField:{root:{backgroundColor:"#FFFFFF",color:"black",borderRadius:0,width:"100%","&:focus":{border:"0.5px solid",borderColor:"#0034B6",borderRadius:2},"&:active":{border:"0.5px solid",borderColor:"#0034B6",borderRadius:2},"&:placeholder":{color:"black"}}},MuiButton:{root:{}},MuiButtonBase:{root:{border:"solid"}},MuiSelect:{}}});var lt=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(u.a,{children:Object(r.jsx)(o.Connect,{location:"w3api.aragonid.eth",connector:"thegraph",children:Object(r.jsx)(O,{children:Object(r.jsxs)(d.a,{theme:dt,children:[Object(r.jsx)(k,{}),Object(r.jsx)(b,{})]})})})})})},bt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,323)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))};n(271);i.a.render(Object(r.jsx)(lt,{}),document.getElementById("root")),bt()}},[[272,1,2]]]);
//# sourceMappingURL=main.ce33dbb1.chunk.js.map